---
title: "EAES 494 Practice Midterm Starter"
author: "Enter your name"
date: "Enter the date"
output: html_document
---

## Load packages

```{r load-packages, message = F}
library(tidyverse)
library(openintro)
```

## Exericses

### Exericse 1

```{r glimpse-earthquakes}
glimpse(earthquakes)
```

There are 123 rows and 7 columns.
There are 3 categorical and 4 numerical variables.

### Exericse 2

```{r names-earthquakes}
names(earthquakes)
```

They are short and they are lower case.

### Exericse 3

```{r count-earthquakes-by-region}
earthquakes %>% 
  count(region) %>% 
  arrange(desc(n))
```

We could have used group_by and summarize to sum the number of rows by region.

### Exericse 4

```{r visualize-earthquake-regions, eval = T}
earthquakes %>% 
  filter(region %in% c("Turkey", "Iran", "China", "Japan", "United States")) %>% 
  ggplot(aes(x = region)) +
  geom_bar() +
  theme_classic() +
  theme(axis.text.x = element_text(angle=90, hjust=1))
```

### Exericse 5

```{r visualize-earthquake-richter, eval = T}
earthquakes %>% 
  filter(region %in% c("Turkey", "Iran", "China", "Japan", "United States")) %>% 
      ggplot(aes(x = richter, fill = region)) +
      geom_histogram() +
      facet_wrap(~region, 
             ncol = 3) +
      theme_classic()
```

It does not appear that the average richter value varies much by region, though there seems to be relatively higher (farther right) values for Japan and the US compared to China, Iran and Turkey.

### Exericse 6

```{r subset-earthquakes}
earthquakes_subset <- earthquakes %>% 
  select(richter, year, month, deaths) %>% 
  filter(!is.na(richter),
         !is.na(year),
         !is.na(month),
         !is.na(deaths)) 
```

Two rows were removed as the new number of rows is 121.

### Exericse 7

```{r violin-plot}
earthquakes_subset %>% 
  ggplot(aes(x = month, y = deaths)) +
  geom_violin() +
  theme_classic()
```

Month is a factor/character variable.
When factors are plotted, they are ordered using their levels.
The levels are assigned based upon alphabetical order when no other order is provided.

```{r recode-month-levels, eval = F}
earthquakes_subset %>% 
  mutate(month = fct_relevel(month,
                             "January",
                             "February",
                             "March",
                             "April",
                             "May",
                             "June",
                             "July",
                             "August",
                             "September",
                             "October",
                             "November",
                             "December")) %>% 
    ggplot(aes(x = month, y = deaths)) +
    geom_violin() +
    theme_classic()
```

### Exericse 8

```{r read-data}
earthquakes_with_issues <- read_csv("data/earthquakes-issues.csv")
glimpse(earthquakes_with_issues)
```

Two names contain spaces, and two of the numerical columns contain bad character values.

```{r read-data-again}
earthquakes_with_issues <- read_csv("data/earthquakes-issues.csv", na = c("#", "."),
                                    name_repair = "universal")
glimpse(earthquakes_with_issues)
```
