---
title: "Homework 04 - Data Classes w. forcats & lubridate"
author: "RUBRIC"
date: "DATE"
output: html_document
---

### Load packages and data

```{r load-packages, message=FALSE}
library(tidyverse)
library(openintro) 
library(lubridate)
library(glue)
```

## Exercises

### Exercise 1

```{r create-3-vectors}
numeric <- c(1:5)
character <- c("a", "b", "c", "d", "e")
mixed <- c(1, "b", 3, "d", 5)
```

-   numeric is a `r typeof(numeric)` vector of class `r class(numeric)`
-   character is a `r typeof(character)` vector of class `r class(character)`
-   mixed is a `r typeof(mixed)` vector of class `r class(mixed)`

### Exercise 2

```{r create-data-frame, eval = T}
data_frame <- bind_cols("numeric" = numeric, "character" = character, "mixed" = mixed)
data_frame
```

-   data_frame is of **type** `r typeof(data_frame)` and of **class** `r class(data_frame)`

### Exercise 3

```{r create-list}
numeric <- c(1:4)
character <- c("a", "b", "c", "d", "e")
mixed <- c(1, "b", 3, "d", 5)
# data_frame <- bind_cols("numeric" = numeric, "character" = character, "mixed" = mixed)
```

`bind_cols()` won't work because data frames need to be created from vectors of equal length.

### Exercise 4

```{r my-list, eval = T}
my_list <- list("numeric" = numeric, "character" = character, "mixed" = mixed)
my_list
```

the `list()` function creates a list from several objects, and can concatenate vectors of different length.

### Exercise 5

```{r earthquakes-factors}
earthquakes %>% 
  ggplot(aes(x = month)) +
  geom_bar() +
  labs(x = "Month of the year", y = "Earthquake count")
```

When `month` is mapped to the x-axis within ggplot it is converted from characters to factors.
The resulting visualization has an unnatural ordering (from April to September) because factor levels (e.g., 1-12 for months of the year) are assigned in alphabetical order by default.

### Exercise 6

```{r earthquakes-forcats-1}
earthquakes %>% 
  ggplot(aes(x = fct_infreq(month))) +
  geom_bar() +
  labs(x = "Month of the year", y = "Earthquake count")
```

`fct_infreq` is being used to order the month factor levels in descending order of frequency.

```{r earthquakes-forcats-2}
earthquakes %>% 
  ggplot(aes(x = fct_rev(month))) +
  geom_bar() +
  labs(x = "Month of the year", y = "Earthquake count")
```

`fct_rev` is being used to reverse the alphabetical (default) order of the month levels

```{r earthquakes-forcats-3}
earthquakes %>% 
  ggplot(aes(x = fct_inorder(month))) +
  geom_bar() +
  labs(x = "Month of the year", y = "Earthquake count")
```

`fct_inorder` is being used to order the month factor levels according to their order of appearance in the month variable (i.e. from first to last rows)

```{r earthquakes-forcats-4}
earthquakes %>% 
  ggplot(aes(x = month %>% fct_infreq() %>% fct_rev())) +
  geom_bar() +
  labs(x = "Month of the year", y = "Earthquake count")
```

`fct_infreq` and `fct_rev` is being used to first order the month levels in order of *ascending* frequency

```{r earthquakes-forcats-5}
earthquakes %>% 
  mutate(month = fct_recode(month,
                            "1" = "January",
                            "2" = "February",
                            "3" = "March",
                            "4" = "April",
                            "5" = "May",
                            "6" = "June",
                            "7" = "July",
                            "8" = "August",
                            "9" = "September",
                            "10" = "October",
                            "11" = "November",
                            "12" = "December")) %>% 
  ggplot(aes(x = month %>% as.numeric() %>% factor())) +
  geom_bar() +
  labs(x = "Month of the year", y = "Earthquake count")
```

`fct_recode` is being used to recode the months as character string numbers from 1-12, then these character strings are converted to numeric, then to factor to reorder the factors using the numeric sequence.

### Exercise 7

```{r earthquake-dates}
earthquakes_new <- earthquakes %>% 
  mutate(date = glue("{year} {month} {day}")) %>% 
  relocate(date)
print(earthquakes_new)
```

The second line of code uses mutate to create a new variable `date`.
Date is created by glueing together the year, month, and day variables.
Relocate on line 3 moves date to the first column position in the data frame.
The new variable `date` is of type `typeof(earthquakes_new$date)` and of class `class(earthquakes_new$date)`.

### Exercise 8

```{r earthquakes-dates-viz}
earthquakes_new %>% 
  filter(year == 1933) %>% 
  ggplot(aes(x = date, y = richter)) +
  geom_point()
```

This plot has the incorrect (alphabetical) month ordering because the factor levels for the dates were assigned alphabetically, therefore August comes before March.

### Exercise 9

```{r earthquakes-dates2, eval = T}
earthquakes %>% 
  mutate(date = ymd(glue("{year} {month} {day}"))) %>% 
  relocate(date) %>% 
  ggplot(aes(x = date, y = richter)) +
  geom_point() 
```
